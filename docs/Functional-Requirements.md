# Функциональные требования

## 1. Основные функции приложения

### 1.1 Получение данных о погоде
- Отображение текущей температуры
- Показ метеоусловий (ясно, облачно и т.д.)
- Отображение минимальной/максимальной температуры
- Вывод иконки текущей погоды

### 1.2 Поиск города
- Ручной поиск по названию города
- Сохранение истории поиска

### 1.3 Прогноз погоды
- Почасовой прогноз на 24 часа
- Многодневный прогноз (до 7 дней)

### 1.4 Работа с данными
- Кэширование последних запросов
- Автоматическое обновление данных

## 2. Use Case диаграмма
<img src="https://github.com/fpmi-pmvs2025/pmvs11a-lab8-the-seal-army/blob/f376e8f1421231fb36f22e160b1f776dbc767f31/assets/Diagrams/useCaseDiagram.png" alt="Use Case Diagram" width="900"/>

Акторы:
- Пользователь (основной актор)
- WeatherAPI (внешний сервис)

Основные варианты использования:
1. Просмотр текущей погоды
2. Поиск погоды по городу
3. Просмотр прогноза
4. Управление историей запросов
5. Обновление данных

## 3. Сценарии использования
### Сценарий F01: Получение текущей погоды
Предусловие: Приложение запущено, есть интернет-соединение  
Шаги:
1. Система автоматически запрашивает погоду для Минска (по умолчанию)
2. Отображает данные в mainCard:
   - Название города (city)
   - Текущая температура (currTemp)
   - Условия (conditional)
   - Иконка (icon)

Постусловие: Данные сохраняются в SQLite через CityDatabaseHelper

### Сценарий F02: Поиск города
Предусловие: Нажата кнопка поиска  
Шаги:
1. Открывается диалог dSearch
2. Пользователь вводит название города
3. При подтверждении:
   - Вызывается gData() с параметром города
   - Данные сохраняются через insertCity()
   - Обновляется searchHistory

### Сценарий F03: Работа с историей поиска
Шаги:
1. При открытии вкладки "HISTORY":
   - Загружается список через getAllCities()
   - Отображается в SearchHistoryList
2. При выборе города:
   - Выполняется gData() для выбранного города

### Сценарий F04: Оффлайн-режим
Предусловие: Нет интернет-соединения  
Шаги:
1. Система проверяет соединение через isNetworkAvailable()
2. Показывает Toast-уведомление о работе в автономном режиме

## 2. Сценарии ошибок

### Сценарий E01: Неверный город
Шаги:
1. Пользователь вводит несуществующий город
2. Volley возвращает ошибку 400
3. Логируется через Log.e("Error", error.toString())

### Сценарий E02: Проблемы с API
Шаги:
1. Приложение не может получить ответ от weatherapi.com
2. Показывается последняя сохраненная версия данных
3. Кнопка синхронизации меняет цвет